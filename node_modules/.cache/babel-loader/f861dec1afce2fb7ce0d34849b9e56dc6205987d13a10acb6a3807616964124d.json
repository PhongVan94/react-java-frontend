{"ast":null,"code":"import axios from \"axios\";\nimport { toast } from \"react-toastify\";\n\n// Set config defaults when creating the instance\nconst instance = axios.create({\n  baseURL: \"http://localhost:8080\"\n\n  // baseURL: process.env.REACT_APP_BACKEND_URL\n});\n\ninstance.defaults.withCredentials = true;\n// Alter defaults after instance has been created\n// instance.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem(\"jwt\")}`;\n\n// Add a request interceptor\ninstance.interceptors.request.use(function (config) {\n  // Do something before request is sent\n\n  return config;\n}, function (error) {\n  // Do something with request error\n  return Promise.reject(error);\n});\n\n// Add a response interceptor\ninstance.interceptors.response.use(function (response) {\n  // Any status code that lie within the range of 2xx cause this function to trigger\n  // Do something with response data\n  return response.data;\n}, function (error) {\n  // Any status codes that falls outside the range of 2xx cause this function to trigger\n  // Do something with response error\n  const status = error && error.response && error.response.status || 500;\n  switch (status) {\n    // authentication (token related issues)\n    case 401:\n      {\n        if (window.location.pathname !== '/' && window.location.pathname !== '/login' && window.location.pathname !== '/register') {\n          toast.error('Unauthorized the user. Please Login...');\n        }\n        return error.response.data;\n      }\n\n    // forbidden (permission related issues)\n    case 403:\n      {\n        toast.error('You dont have permission to access!');\n        return Promise.reject(error);\n      }\n\n    // bad request\n    case 400:\n      {\n        return Promise.reject(error);\n      }\n\n    // not found\n    case 404:\n      {\n        return Promise.reject(error);\n      }\n\n    // conflict\n    case 409:\n      {\n        return Promise.reject(error);\n      }\n\n    // unprocessable\n    case 422:\n      {\n        return Promise.reject(error);\n      }\n\n    // generic api error (server related) unexpected\n    default:\n      {\n        return Promise.reject(error);\n      }\n  }\n});\nexport default instance;","map":{"version":3,"names":["axios","toast","instance","create","baseURL","defaults","withCredentials","interceptors","request","use","config","error","Promise","reject","response","data","status","window","location","pathname"],"sources":["C:/Users/admin/Downloads/Study/JavaWeb2024/react-frontend-java/src/components/setups/customize-axios.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\n// Set config defaults when creating the instance\r\nconst instance = axios.create({\r\n  baseURL: \"http://localhost:8080\"\r\n\r\n  // baseURL: process.env.REACT_APP_BACKEND_URL\r\n});\r\ninstance.defaults.withCredentials = true;\r\n// Alter defaults after instance has been created\r\n// instance.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem(\"jwt\")}`;\r\n\r\n// Add a request interceptor\r\ninstance.interceptors.request.use(function (config) {\r\n  // Do something before request is sent\r\n\r\n  return config;\r\n}, function (error) {\r\n  // Do something with request error\r\n  return Promise.reject(error);\r\n});\r\n\r\n// Add a response interceptor\r\ninstance.interceptors.response.use(function (response) {\r\n  // Any status code that lie within the range of 2xx cause this function to trigger\r\n  // Do something with response data\r\n  return response.data;\r\n}, function (error) {\r\n  // Any status codes that falls outside the range of 2xx cause this function to trigger\r\n  // Do something with response error\r\n  const status = error && error.response && error.response.status || 500;\r\n  switch (status) {\r\n      // authentication (token related issues)\r\n    case 401: {\r\n      if (window.location.pathname !== '/'\r\n          && window.location.pathname !== '/login'\r\n          && window.location.pathname !== '/register') {\r\n        toast.error('Unauthorized the user. Please Login...');\r\n\r\n      }\r\n      return error.response.data;\r\n    }\r\n\r\n      // forbidden (permission related issues)\r\n    case 403: {\r\n      toast.error('You dont have permission to access!');\r\n      return Promise.reject(error);\r\n    }\r\n\r\n      // bad request\r\n    case 400: {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n      // not found\r\n    case 404: {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n      // conflict\r\n    case 409: {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n      // unprocessable\r\n    case 422: {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n      // generic api error (server related) unexpected\r\n    default: {\r\n      return Promise.reject(error);\r\n    }\r\n  }\r\n});\r\n\r\nexport default instance;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;;AAEtC;AACA,MAAMC,QAAQ,GAAGF,KAAK,CAACG,MAAM,CAAC;EAC5BC,OAAO,EAAE;;EAET;AACF,CAAC,CAAC;;AACFF,QAAQ,CAACG,QAAQ,CAACC,eAAe,GAAG,IAAI;AACxC;AACA;;AAEA;AACAJ,QAAQ,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,UAAUC,MAAM,EAAE;EAClD;;EAEA,OAAOA,MAAM;AACf,CAAC,EAAE,UAAUC,KAAK,EAAE;EAClB;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;;AAEF;AACAT,QAAQ,CAACK,YAAY,CAACO,QAAQ,CAACL,GAAG,CAAC,UAAUK,QAAQ,EAAE;EACrD;EACA;EACA,OAAOA,QAAQ,CAACC,IAAI;AACtB,CAAC,EAAE,UAAUJ,KAAK,EAAE;EAClB;EACA;EACA,MAAMK,MAAM,GAAGL,KAAK,IAAIA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,CAACE,MAAM,IAAI,GAAG;EACtE,QAAQA,MAAM;IACV;IACF,KAAK,GAAG;MAAE;QACR,IAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,GAAG,IAC7BF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,QAAQ,IACrCF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,EAAE;UAC/ClB,KAAK,CAACU,KAAK,CAAC,wCAAwC,CAAC;QAEvD;QACA,OAAOA,KAAK,CAACG,QAAQ,CAACC,IAAI;MAC5B;;IAEE;IACF,KAAK,GAAG;MAAE;QACRd,KAAK,CAACU,KAAK,CAAC,qCAAqC,CAAC;QAClD,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B;;IAEE;IACF,KAAK,GAAG;MAAE;QACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B;;IAEE;IACF,KAAK,GAAG;MAAE;QACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B;;IAEE;IACF,KAAK,GAAG;MAAE;QACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B;;IAEE;IACF,KAAK,GAAG;MAAE;QACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B;;IAEE;IACF;MAAS;QACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B;EACF;AACF,CAAC,CAAC;AAEF,eAAeT,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}