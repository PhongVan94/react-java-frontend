{"ast":null,"code":"import { loginUser } from \"../../services/userServices\";\nimport { toast } from \"react-toastify\";\nimport localStorage from \"redux-persist/es/storage\";\nexport const FETCH_USER_LOGIN = 'FETCH_USER_LOGIN';\nexport const FETCH_USER_ERROR = 'FETCH_USER_ERROR';\nexport const FETCH_USER_SUCCESS = 'FETCH_USER_SUCCESS';\nexport const USER_LOGOUT = 'USER_LOGOUT';\nexport const USER_REFRESH = 'USER_REFRESH';\nexport const handleLoginRedux = (valueLogin, password) => {\n  return async (dispatch, getState) => {\n    dispatch({\n      type: FETCH_USER_LOGIN\n    });\n    let response = await loginUser(valueLogin, password);\n    if (response && +response.ec === 0) {\n      //success\n      let group = response.dt.group;\n      let email = response.dt.email;\n      let firstname = response.dt.firstname;\n      let lastname = response.dt.lastname;\n      let token = response.dt.token;\n      let payload = {\n        isAuthenticated: true,\n        token,\n        account: {\n          group,\n          email,\n          firstname,\n          lastname\n        }\n      };\n      localStorage.setItem('jwt', token);\n      dispatch({\n        type: FETCH_USER_SUCCESS,\n        data: {\n          payload\n        }\n      });\n    } else {\n      //error\n      if (response && +response.EC !== 0) {\n        //error\n        toast.error(response.EM);\n      }\n      dispatch({\n        type: FETCH_USER_ERROR\n      });\n    }\n  };\n};\nexport const handleLogoutRedux = () => {\n  return (dispatch, getState) => {\n    dispatch({\n      type: USER_LOGOUT\n    });\n  };\n};\nexport const handleRefresh = () => {\n  return (dispatch, getState) => {\n    dispatch({\n      type: USER_REFRESH\n    });\n  };\n};","map":{"version":3,"names":["loginUser","toast","localStorage","FETCH_USER_LOGIN","FETCH_USER_ERROR","FETCH_USER_SUCCESS","USER_LOGOUT","USER_REFRESH","handleLoginRedux","valueLogin","password","dispatch","getState","type","response","ec","group","dt","email","firstname","lastname","token","payload","isAuthenticated","account","setItem","data","EC","error","EM","handleLogoutRedux","handleRefresh"],"sources":["C:/Users/admin/Downloads/Study/JavaWeb2024/react-frontend-java/src/components/redux/actions/userAction.js"],"sourcesContent":["import {loginUser} from \"../../services/userServices\";\r\nimport {toast} from \"react-toastify\";\r\nimport localStorage from \"redux-persist/es/storage\";\r\n\r\nexport const FETCH_USER_LOGIN = 'FETCH_USER_LOGIN';\r\nexport const FETCH_USER_ERROR = 'FETCH_USER_ERROR';\r\nexport const FETCH_USER_SUCCESS = 'FETCH_USER_SUCCESS';\r\n\r\nexport const USER_LOGOUT = 'USER_LOGOUT';\r\nexport const USER_REFRESH = 'USER_REFRESH';\r\n\r\nexport const handleLoginRedux = (valueLogin, password) => {\r\n    return async (dispatch, getState) => {\r\n        dispatch({type: FETCH_USER_LOGIN});\r\n\r\n        let response = await loginUser(valueLogin, password);\r\n        if (response && +response.ec === 0) {\r\n            //success\r\n            let group = response.dt.group;\r\n            let email = response.dt.email;\r\n            let firstname = response.dt.firstname;\r\n            let lastname = response.dt.lastname;\r\n            let token = response.dt.token;\r\n            let payload = {\r\n                isAuthenticated: true,\r\n                token,\r\n                account: {group, email, firstname,lastname}\r\n            }\r\n\r\n            localStorage.setItem('jwt', token)\r\n\r\n            dispatch({\r\n                type: FETCH_USER_SUCCESS,\r\n                data: {payload}\r\n            });\r\n        }\r\n\r\nelse\r\n    {\r\n        //error\r\n        if (response && +response.EC !== 0) {\r\n            //error\r\n            toast.error(response.EM)\r\n        }\r\n        dispatch({\r\n            type: FETCH_USER_ERROR\r\n        });\r\n\r\n    }\r\n\r\n}\r\n}\r\nexport const handleLogoutRedux = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: USER_LOGOUT\r\n        })\r\n    }\r\n}\r\n\r\nexport const handleRefresh = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: USER_REFRESH\r\n        })\r\n    }\r\n}\r\n"],"mappings":"AAAA,SAAQA,SAAS,QAAO,6BAA6B;AACrD,SAAQC,KAAK,QAAO,gBAAgB;AACpC,OAAOC,YAAY,MAAM,0BAA0B;AAEnD,OAAO,MAAMC,gBAAgB,GAAG,kBAAkB;AAClD,OAAO,MAAMC,gBAAgB,GAAG,kBAAkB;AAClD,OAAO,MAAMC,kBAAkB,GAAG,oBAAoB;AAEtD,OAAO,MAAMC,WAAW,GAAG,aAAa;AACxC,OAAO,MAAMC,YAAY,GAAG,cAAc;AAE1C,OAAO,MAAMC,gBAAgB,GAAGA,CAACC,UAAU,EAAEC,QAAQ,KAAK;EACtD,OAAO,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;IACjCD,QAAQ,CAAC;MAACE,IAAI,EAAEV;IAAgB,CAAC,CAAC;IAElC,IAAIW,QAAQ,GAAG,MAAMd,SAAS,CAACS,UAAU,EAAEC,QAAQ,CAAC;IACpD,IAAII,QAAQ,IAAI,CAACA,QAAQ,CAACC,EAAE,KAAK,CAAC,EAAE;MAChC;MACA,IAAIC,KAAK,GAAGF,QAAQ,CAACG,EAAE,CAACD,KAAK;MAC7B,IAAIE,KAAK,GAAGJ,QAAQ,CAACG,EAAE,CAACC,KAAK;MAC7B,IAAIC,SAAS,GAAGL,QAAQ,CAACG,EAAE,CAACE,SAAS;MACrC,IAAIC,QAAQ,GAAGN,QAAQ,CAACG,EAAE,CAACG,QAAQ;MACnC,IAAIC,KAAK,GAAGP,QAAQ,CAACG,EAAE,CAACI,KAAK;MAC7B,IAAIC,OAAO,GAAG;QACVC,eAAe,EAAE,IAAI;QACrBF,KAAK;QACLG,OAAO,EAAE;UAACR,KAAK;UAAEE,KAAK;UAAEC,SAAS;UAACC;QAAQ;MAC9C,CAAC;MAEDlB,YAAY,CAACuB,OAAO,CAAC,KAAK,EAAEJ,KAAK,CAAC;MAElCV,QAAQ,CAAC;QACLE,IAAI,EAAER,kBAAkB;QACxBqB,IAAI,EAAE;UAACJ;QAAO;MAClB,CAAC,CAAC;IACN,CAAC,MAGL;MACI;MACA,IAAIR,QAAQ,IAAI,CAACA,QAAQ,CAACa,EAAE,KAAK,CAAC,EAAE;QAChC;QACA1B,KAAK,CAAC2B,KAAK,CAACd,QAAQ,CAACe,EAAE,CAAC;MAC5B;MACAlB,QAAQ,CAAC;QACLE,IAAI,EAAET;MACV,CAAC,CAAC;IAEN;EAEJ,CAAC;AACD,CAAC;AACD,OAAO,MAAM0B,iBAAiB,GAAGA,CAAA,KAAM;EACnC,OAAO,CAACnB,QAAQ,EAAEC,QAAQ,KAAK;IAC3BD,QAAQ,CAAC;MACLE,IAAI,EAAEP;IACV,CAAC,CAAC;EACN,CAAC;AACL,CAAC;AAED,OAAO,MAAMyB,aAAa,GAAGA,CAAA,KAAM;EAC/B,OAAO,CAACpB,QAAQ,EAAEC,QAAQ,KAAK;IAC3BD,QAAQ,CAAC;MACLE,IAAI,EAAEN;IACV,CAAC,CAAC;EACN,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}